---
title: "AD7280A BMS 개발기 #25 - 72V 팩 첫 연결, 떨리는 순간"
date: 2024-02-08
draft: false
tags: ["AD7280A", "BMS", "STM32", "실전", "배터리"]
categories: ["BMS 개발"]
series: ["AD7280A BMS 개발"]
summary: "테스트 벤치에서 잘 되던 게 실제 배터리 연결하면 다르다. 첫 연결의 긴장감."
---

벤치에서 파워서플라이로 테스트할 때는 잘 됐다.

이제 진짜 72V 배터리팩에 연결할 차례.

![배터리 연결](/imgs/cells%20connection.jpg)

---

## 연결 전 체크

고전압 작업이라 체크리스트 필수.

```
□ 절연 장갑 착용
□ 멀티미터로 배터리 전압 확인
□ BMS 전원 OFF 상태 확인
□ 모든 커넥터 분리 상태 확인
□ 셀 탭 연결 순서 확인
□ 주변 정리 (공구, 도체 없는지)
```

---

## 셀 탭 연결

Cell 0부터 순서대로 연결.

```
Cell 0: 가장 낮은 전위 (Battery -)
Cell 1: Cell 0 + 한 셀
...
Cell 23: 가장 높은 전위 (Battery +)
```

순서 틀리면:
- 음수 전압 읽힘
- IC 손상 가능

세 번 확인하고 연결했다.

---

## 첫 전원 인가

숨 참고 전원 스위치 ON.

```
LED 점등... OK
부팅 메시지...

=== BMS Initialized ===
Devices found: 4
Cell voltages:
  C01: 3312mV  C02: 3308mV  C03: 3315mV ...
Pack voltage: 72340mV
```

동작한다!

---

## 문제 발생

30분 후.

```
[ALERT] Cell 15 OV: 3720mV
State: OV_FAULT
```

Cell 15만 전압이 높다? 다른 셀은 3.3V인데 3.72V?

확인해보니 밸런싱 저항 납땜 불량이었다. Cell 15 밸런싱이 안 돼서 혼자 전압이 올라간 거다.

수리하고 다시 테스트.

---

## 전류 센싱 확인

션트 저항 양단 전압 확인.

```
예상: 10mΩ × 10A = 100mV
측정: 132mV
```

오차 32%. 뭔가 이상하다.

션트 연결부 저항이 포함된 거였다. Kelvin 연결 안 해서.

PCB 수정해서 재측정. 오차 3% 이내로 줄었다.

---

## 온도 센서 확인

NTC 읽어보니 온도가 이상하다.

```
실제: 25°C
표시: 31°C
```

NTC B값 불일치. 3380 NTC 달았는데 테이블은 3950 기준.

테이블 수정하거나 NTC 교체. 나는 테이블 수정했다.

---

## 48시간 테스트

수정 후 48시간 연속 테스트.

```
충전 → 완충 → 방전 → 완방 → 반복
```

로그 확인:
- SOC 정확도: 완충/완방에서 리셋되니까 OK
- 밸런싱: 편차 20mV 이내로 유지
- 온도: 정상 범위
- 알람: 없음

통과!

---

## 배운 것

벤치에서 OK여도 실제 연결하면 문제가 튀어나온다.

- 납땜 불량
- 센서 연결 저항
- 파라미터 불일치

**현장 테스트 필수.**

---

다음은 현장 트러블슈팅.

[#26 - 현장 트러블슈팅](/posts/bms/ad7280a-bms-dev-26/)
