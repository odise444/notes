---
title: "AD7280A BMS 개발 삽질기 #1 - 48V 넣었다가 IC 터뜨릴 뻔한 이야기"
date: 2024-12-07
draft: false
tags: ["BMS", "AD7280A", "임베디드", "배터리", "삽질"]
categories: ["BMS 개발"]
summary: "AD7280A 평가보드로 12셀 배터리 모니터링 테스트하려다 겪은 첫 번째 삽질. 데이터시트 대충 읽으면 IC가 터진다."
---

## 시리즈 소개

회사에서 BMS(Battery Management System) 개발을 맡게 됐다. 배터리 셀 전압 모니터링용으로 Analog Devices의 AD7280A를 검토하게 됐는데, 이 칩이 생각보다 까다로웠다.

이 시리즈에서는 AD7280A 평가보드(EVAL-AD7280AEDZ)를 가지고 삽질한 경험을 정리한다. 같은 칩으로 고생하는 분들께 도움이 됐으면 좋겠다.

## AD7280A가 뭔데?

리튬이온 배터리 팩의 셀 전압을 모니터링하는 IC다. 주요 스펙은:

- 6셀 동시 측정 (VIN0~VIN6)
- 데이지체인으로 여러 개 연결 가능 (최대 8개, 48셀)
- SPI 통신
- 셀 밸런싱 스위치 내장

EVAL-AD7280AEDZ 평가보드에는 AD7280A가 2개 달려있어서 12셀까지 테스트할 수 있다.

## 첫 번째 삽질: 48V 파워서플라이

12셀 리튬이온이면 공칭 전압이 44.4V (3.7V × 12)다. 그래서 단순하게 생각했다.

> "48V 파워서플라이 연결하면 되겠네?"

**결론부터 말하면, 이러면 IC가 터진다.**

### VDD 최대 정격

데이터시트를 다시 보니까:

| 항목 | 값 |
|------|-----|
| VDD 동작 범위 | 8V ~ 30V |
| VDD 절대 최대 | 33V |

AD7280A는 자기가 담당하는 셀 구간에서 직접 전원을 공급받는 구조다. 48V를 VDD에 바로 넣으면 33V 최대 정격을 훨씬 초과한다.

![](ad7280a-bms-dev-01-1.png)

### 데이지체인 구조 이해하기

평가보드의 2개 AD7280A는 이렇게 연결되어 있다:

```
48V ──┬── VDD (상위 AD7280A) ─┐
      │                       │ Cell 7~12 담당
24V ──┼── VSS (상위)          │
      │   VDD (하위)          │
      │                       │ Cell 1~6 담당
 0V ──┴── VSS (하위)          ┘
```

각 IC는 자기 구간의 6셀(약 24V)에서만 전원을 공급받는다. 그래서 VDD 30V 제한을 넘지 않는 것이다.

**48V를 J2-7(VIN6) 하나에만 연결하면 하위 IC의 VDD가 48V가 되어 즉사한다.**

## 그래서 어떻게 테스트하나?

### 방법 1: 실제 배터리 사용

가장 확실한 방법. 12S 리튬이온 팩을 J2, J3 커넥터에 연결한다. 근데 48V 배터리 팩이 그냥 굴러다니진 않으니까...

### 방법 2: 저항 분배기 직접 구성

![](ad7280a-bms-dev-01-2.png)

파워서플라이 + 저항으로 셀 전압을 시뮬레이션한다.

```
48V (+) ──┬── J3-6 (VIN12)
         4kΩ
          ├── J3-5 (VIN11)
         4kΩ
          ├── J3-4 (VIN10)
         4kΩ
          ├── J3-3 (VIN9)
         4kΩ
          ├── J3-2 (VIN8)
         4kΩ
          ├── J3-1 / J2-7 (VIN7/VIN6 공통)
         4kΩ
          ├── J2-6 (VIN5)
         4kΩ
          ├── J2-5 (VIN4)
         4kΩ
          ├── J2-4 (VIN3)
         4kΩ
          ├── J2-3 (VIN2)
         4kΩ
          ├── J2-2 (VIN1)
         4kΩ
GND (-)───┴── J2-1 (VIN0)
```

이렇게 하면 각 셀이 약 4V로 측정된다.

### 방법 3: 6셀만 테스트

24V 파워서플라이로 하위 AD7280A(Cell 1~6)만 테스트하는 방법도 있다. 일단 통신이 되는지 확인하기엔 이게 제일 간단하다.

## 교훈

1. **데이터시트의 Absolute Maximum Ratings는 반드시 확인하자**
2. **데이지체인 구조에서 각 IC의 전원 공급 경로를 이해하자**
3. **평가보드에 배터리 시뮬레이터가 내장되어 있을 거라고 기대하지 말자** (EVAL-AD7280AEDZ에는 없다)

다음 글에서는 저항 분배기로 테스트 환경 구성하고, VIN5/VIN6 채널에서 0만 읽히는 문제를 다룬다.

---

## 참고 자료

- [AD7280A Datasheet](https://www.analog.com/media/en/technical-documentation/data-sheets/ad7280a.pdf)
- [EVAL-AD7280AEDZ User Guide (UG-252)](https://www.analog.com/media/en/technical-documentation/user-guides/ug-252.pdf)
