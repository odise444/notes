---
title: "AD7280A BMS 개발기 #1 - 이게 뭔지부터 알아보자"
date: 2024-12-01
draft: false
tags: ["AD7280A", "BMS", "STM32", "리튬배터리"]
categories: ["BMS 개발"]
series: ["AD7280A BMS 개발"]
summary: "리튬 배터리 24셀을 모니터링해야 한다. AD7280A라는 IC를 쓰기로 했다."
---

회사에서 72V 배터리 팩용 BMS를 만들라고 했다. 24셀 LiFePO4.

처음엔 그냥 ADC 24채널 달면 되는 거 아닌가 싶었다. 근데 생각해보니 72V 팩이면 맨 위 셀은 GND 기준으로 72V다. 일반 ADC로는 측정이 안 된다.

찾아보니 배터리 모니터링 전용 IC들이 있었다. TI의 BQ 시리즈, ADI의 AD7280A/LTC 시리즈 등등. 회사에 AD7280A 평가보드가 굴러다녀서 이걸로 하기로 했다.

---

AD7280A가 뭐냐면, 리튬 배터리 6셀을 모니터링하는 IC다.

![AD7280A 블록 다이어그램](/imgs/ad7280a-bms-dev-01-1.png)

특징을 정리하면:
- 셀 전압 6채널 측정
- 12비트 ADC (분해능 약 1mV)
- 보조 ADC 6채널 (온도 센서용)
- 셀 밸런싱 스위치 내장
- SPI 통신
- 데이지체인으로 여러 개 연결 가능

24셀이면 AD7280A 4개를 연결하면 된다. 6셀 × 4개 = 24셀.

---

데이지체인이라는 게 좀 특이하다.

![데이지체인 구성](/imgs/ad7280a-bms-dev-01-2.png)

MCU는 맨 아래 IC하고만 SPI로 통신한다. 나머지 IC들은 줄줄이 연결되어서 데이터가 위로 올라갔다가 다시 내려온다.

장점은 MCU 핀을 아낄 수 있다는 거다. 4개 IC를 개별로 연결하면 CS 핀이 4개 필요한데, 데이지체인은 1개면 된다.

단점은 통신이 복잡해진다. 중간에 하나가 고장나면 그 위에 있는 IC들은 다 통신 불가. 그리고 타이밍 맞추기가 까다롭다.

---

평가보드를 구해서 일단 만져봤다.

![EVAL-AD7280A 평가보드](/imgs/EVAL_AD7280A.jpg)

ADI에서 나온 공식 평가보드인데, 6셀짜리 싱글 디바이스다. USB로 PC에 연결하면 전용 소프트웨어로 전압 모니터링이 된다.

이걸로 일단 동작 원리를 파악하고, 실제 개발은 STM32로 하기로 했다.

---

다음 글에서 데이지체인 연결 방법을 좀 더 자세히 정리한다.

[#2 - 데이지체인 연결](/posts/bms/ad7280a-bms-dev-2/)
