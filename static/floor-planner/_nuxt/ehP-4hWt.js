import{d as C,r as i,o as _,U as L,x as c,y as f,z as t,B as T,L as E,E as m,M as u,D as S,X as M,C as N,A as I,a2 as J,W as B,_ as R}from"./DFjDwT1c.js";import{m as V,n as $}from"./BBNf1ika.js";const j={class:"h-screen flex flex-col bg-gray-100"},z={class:"h-14 bg-white border-b border-gray-200 flex items-center px-4 shrink-0"},D={class:"ml-auto flex items-center gap-2"},F={key:0,class:"absolute right-0 top-full mt-1 bg-white border border-gray-200 rounded shadow-lg py-1 min-w-[140px] z-50"},G={class:"flex-1 flex overflow-hidden"},O={key:0,class:"fixed bottom-4 right-4 bg-gray-800 text-white px-4 py-2 rounded shadow-lg"},P=C({__name:"default",setup(U){const s=i(!1),d=i(!1),v=i(""),p=i(null),o=V("canvasRef",()=>null),r=a=>{v.value=a,d.value=!0,setTimeout(()=>{d.value=!1},2e3)},y=()=>{confirm(`현재 작업을 초기화하시겠습니까?
저장하지 않은 내용은 사라집니다.`)&&o?.value&&(o.value.room=null,o.value.furnitureList=[],o.value.doorList=[],r("초기화되었습니다"))},b=()=>{o?.value?.saveToLocalStorage&&(o.value.saveToLocalStorage(),r("저장되었습니다")),s.value=!1},h=()=>{p.value?.click()},k=async a=>{const e=a.target,l=e.files?.[0];if(l){try{const n=await $(l);o?.value&&(o.value.room=n.room,o.value.furnitureList=n.furnitureList||[],o.value.doorList=n.doorList||[],B(()=>{o.value?.resetViewToRoom?.()}),r("불러오기 완료"))}catch(n){r(n.message||"불러오기 실패")}e.value=""}},x=a=>{o?.value?.exportImage&&o.value.exportImage(a),s.value=!1},w=()=>{o?.value?.exportJson&&o.value.exportJson(),s.value=!1},g=a=>{s.value&&(s.value=!1)};return _(()=>{document.addEventListener("click",g)}),L(()=>{document.removeEventListener("click",g)}),(a,e)=>(f(),c("div",j,[t("header",z,[e[6]||(e[6]=t("h1",{class:"text-lg font-semibold text-gray-800"},"이사할 때",-1)),t("div",D,[t("button",{class:"px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded",onClick:y}," 새로 만들기 "),t("button",{class:"px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded",onClick:b}," 저장 "),t("button",{class:"px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded",onClick:h}," 불러오기 "),t("input",{ref_key:"fileInputRef",ref:p,type:"file",accept:".json",class:"hidden",onChange:k},null,544),t("div",{class:"relative",onClick:e[3]||(e[3]=E(()=>{},["stop"]))},[t("button",{class:"px-3 py-1.5 text-sm bg-blue-500 text-white hover:bg-blue-600 rounded flex items-center gap-1",onClick:e[0]||(e[0]=l=>s.value=!u(s))},[...e[4]||(e[4]=[S(" 내보내기 ",-1),t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])]),u(s)?(f(),c("div",F,[t("button",{class:"w-full px-4 py-2 text-sm text-left text-gray-700 hover:bg-gray-100",onClick:e[1]||(e[1]=l=>x("png"))}," PNG 이미지 "),t("button",{class:"w-full px-4 py-2 text-sm text-left text-gray-700 hover:bg-gray-100",onClick:e[2]||(e[2]=l=>x("jpeg"))}," JPEG 이미지 "),e[5]||(e[5]=t("hr",{class:"my-1 border-gray-200"},null,-1)),t("button",{class:"w-full px-4 py-2 text-sm text-left text-gray-700 hover:bg-gray-100",onClick:w}," JSON 파일 ")])):m("",!0)])])]),t("div",G,[M(a.$slots,"default",{},void 0,!0)]),T(J,{name:"toast"},{default:N(()=>[u(d)?(f(),c("div",O,I(u(v)),1)):m("",!0)]),_:1})]))}}),X=R(P,[["__scopeId","data-v-7aaa2456"]]);export{X as default};
